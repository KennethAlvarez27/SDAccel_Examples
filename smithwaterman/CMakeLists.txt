# This file is auto-generated by Xilinx Gauntlet System. Do not edit!
cmake_minimum_required(VERSION 2.8)

#project name
project(smithwaterman_host.exe)

###############################
# Custom find modules
###############################
MESSAGE( STATUS "CMAKE_CURRENT_SOURCE_DIR: " ${CMAKE_CURRENT_SOURCE_DIR} )

##parent dir
set(PARENT_DIR ${CMAKE_CURRENT_SOURCE_DIR})
MESSAGE( STATUS "PARENT_DIR: " ${PARENT_DIR})


##cmake
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PARENT_DIR}/cmake/")

#opencl path                    
MESSAGE( STATUS "SDACCEL_ROOT=" ${SDACCEL_ROOT})
MESSAGE( STATUS "OpenCL_INCPATH=" ${OpenCL_INCPATH})
MESSAGE( STATUS "OpenCL_LIBPATH=" ${OpenCL_LIBPATH})

###############################
# Find OpenCL
###############################
find_package(OpenCL REQUIRED)
include_directories(${OPENCL_INCLUDE_DIRS})
link_directories(${OPENCL_LIBRARY_DIRS})
add_definitions(${OPENCL_DEFINITIONS})
if(NOT OPENCL_FOUND)
	message(ERROR " OPENCL not found!")
endif(NOT OPENCL_FOUND)

###############################
# Find OpenMP
###############################
find_package(OpenMP REQUIRED)
include_directories(${OPENMP_INCLUDE_DIRS})
link_directories(${OPENMP_LIBRARY_DIRS})
add_definitions(${OPENMP_DEFINITIONS})
if(NOT OPENMP_FOUND)
	message(ERROR " OPENMP not found!")
endif(NOT OPENMP_FOUND)

###############################
# Other include paths
###############################
include_directories(src 
					src/common/
					src/3rdparty/zeromq-4.0.5/include/ 
					${SDACCEL_ROOT}/include/)


###############################
# Add source files
###############################
file(GLOB SRC
	src/genseq.cpp
	src/matcharray.cpp
	src/matcharray.h
	src/opencl_sw_maxscore_systolic.cpp.cpp
	src/opencl_sw_maxscore_basic.cpp
	src/smithwaterman.h
	src/smithwaterman.cpp
	src/sw.h
	src/main.cpp
	src/intel/ssw.h
	src/intel/ssw.c
	src/intel/kseq.h
	src/intel/sc_demo.c
	src/common/cmdlineparser.h	
	src/common/cmdlineparser.cpp
	src/common/logger.h
	src/common/logger.cpp
	src/common/profiler.h
	src/common/profiler.cpp
	src/common/xcl.h
	src/common/xcl.cpp

	)

###############################
# Add definitions
###############################
include(CheckCXXCompilerFlag)
CHECK_CXX_COMPILER_FLAG("-std=c++11" COMPILER_SUPPORTS_CXX11)
CHECK_CXX_COMPILER_FLAG("-std=c++0x" COMPILER_SUPPORTS_CXX0X)
if(COMPILER_SUPPORTS_CXX11)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
elseif(COMPILER_SUPPORTS_CXX0X)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x")
else()
    message(STATUS "The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.")
endif()

###############################
# Linking
###############################
add_executable(smithwaterman_host.exe ${SRC})
target_link_libraries(smithwaterman_host.exe ${OPENCL_LIBRARIES} ${OPENMP_LIBRARIES} gomp z)
